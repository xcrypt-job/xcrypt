# A sample of unifying multiple jobs into a bulk job using the bulk.pm module.
use base qw(bulk core);

&bulk::initialize(
  max_num => 3,       # unifies up to 3 jobs
);

%template = (
    'id' => 'jobbulk',
    'exe0@' => sub { 'bin/fib ' . ($_[0] + $_[1]) . " > out_$_[0]_$_[1]"},
    'RANGE0' => [31..33],
    'RANGE1' => [0,9],
);

my @jobs = &prepare(%template);
my @bulk = &bulk::bulk('bulk, @jobs);
&submit_sync(@bulk);
