use base qw(core);
use File::Spec;
use xcropt;

my $Inventory_Path = $xcropt::options{inventory_path};
my $Logfile = File::Spec->catfile($Inventory_Path, 'transitions.log');

my @jobs;
open (my $LOG, '<', $Logfile);
unless ($LOG) {
    warn "Failed to open the log file $Logfile in read mode.";
}
while (<$LOG>) {
    chomp;
    if ($_ =~ /^:reqID\s+(\S+)\s+([0-9]+)/ ) {
	my $id = $1;
	system("xcryptcancel $id");
    }
}
close ($LOG);
